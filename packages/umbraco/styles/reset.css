@layer reset {
  html {
    background: var(--base);
    color: var(--base-text);
  }

  html {
    scrollbar-gutter: stable;
    interpolate-size: allow-keywords;
  }

  /*
    1. Use a more-intuitive box-sizing model.
  */
  *,
  *::before,
  *::after {
    box-sizing: border-box;
    margin: 0;
  }
  /*
      3. Allow percentage-based heights in the application
    */
  html,
  body {
    height: 100%;
    overflow: auto;
    overflow: initial;
    transition: background 0.2s;
  }

  body {
    overflow-x: hidden;
  }
  /*
      6. Improve media defaults
    */
  img,
  picture,
  video,
  canvas,
  svg {
    display: block;
    max-width: 100%;
  }

  img {
    background: var(--accent-40);
  }
  /*
      7. Remove built-in form typography styles
    */
  input,
  button,
  textarea,
  select {
    font: inherit;
  }
  /*
      8. Avoid text overflows
    */
  p,
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    overflow-wrap: break-word;
    /* Only animate text color, not layout-affecting properties */
    transition: color 0.004s !important;
  }
  /*
      9. Create a root stacking context
    */
  #root,
  #__next {
    isolation: isolate;
  }

  button {
    background: none;
    cursor: pointer;
    border: none;
    outline: none;
    padding: 0;
  }

  a {
    color: var(--base-text);
    text-decoration: none;
    /* Limit to paint-only color transitions */
    transition: color var(--time), background-color var(--time), border-color var(--time);
  }

  a:hover {
    color: var(--accent-100);
  }

  ::-moz-selection {
    /* Code for Firefox */
    color: var(--accent-text);
    background: var(--accent);
  }

  ::selection {
    color: var(--accent-10);
    background: var(--accent-120);
  }

  img {
    -webkit-user-drag: none;
  }
}

/* Accessibility: minimize motion when requested */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    transition-duration: 0.01ms !important;
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
  }
}

/* During theme swaps, restrict transitions to color-related properties only.
   This avoids jank from layout/transform animations when CSS variables update. */
html.theme-changing *,
html.theme-changing *::before,
html.theme-changing *::after {
  transition-property: color, background-color, border-color, outline-color, fill, stroke, text-decoration-color, box-shadow !important;
}
